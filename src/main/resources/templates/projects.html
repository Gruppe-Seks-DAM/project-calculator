<!-- File: src/main/resources/templates/projects.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Projekter</title>

    <style>
        * { box-sizing: border-box; }
        body { margin: 0; font-family: Arial, sans-serif; background-color: #fff; display:flex; justify-content:center; }
        .page-frame { margin:20px; border:2px solid #0c3c57; background:#fff; width:90vw; max-width:1200px; min-height:80vh; padding:40px 60px; position:relative; }

        /* Header (matched to subprojects.html) */
        .header { text-align:center; margin-bottom:24px; }
        .header-title { font-size:22px; font-weight:bold; letter-spacing:1px; }
        .header-subtitle { margin-top:8px; font-size:13px; color:#444; }

        /* Actions (matched to subprojects.html) */
        .actions { display:flex; justify-content:space-between; align-items:center; margin-bottom:18px; }
        .create-link { text-decoration:none; background:#0c3c57; color:#fff; padding:8px 14px; border-radius:6px; }
        .create-link:hover { opacity:0.95; }
        .back-link { color:#0c3c57; text-decoration:none; font-size:13px; }

        /* List styles (matched to subprojects.html) */
        .projects-list { margin-top:20px; }
        .project-label { font-size:13px; letter-spacing:3px; margin-bottom:8px; }
        .project-row { display:flex; align-items:center; justify-content:space-between; margin-bottom:22px; }
        .project-box { flex:1; border:1px solid #000; padding:16px 20px; margin-right:20px; }
        .project-name { font-size:15px; letter-spacing:1px; text-transform:uppercase; margin-bottom:6px; }
        .project-meta { font-size:13px; color:#444; margin-top:4px; }
        .circle-button { width:44px; height:44px; border-radius:50%; background:#000; display:flex; align-items:center; justify-content:center; text-decoration:none; color:#fff; }
        .delete-form { margin-top:6px; }
        .delete-button { background:none; border:none; color:#b00020; font-size:11px; text-transform:uppercase; letter-spacing:1px; cursor:pointer; padding:0; }
        .delete-button:hover { text-decoration:underline; }
        .empty-state { margin-top:60px; text-align:center; font-style:italic; color:#777; }
    </style>
</head>
<body>

<div class="page-frame">

    <!-- Centered header matching subprojects.html -->
    <div class="header">
        <div class="header-title">PROJEKTOVERSIGT</div>
        <div class="header-subtitle">Se alle projekter og vælg hvilket du vil arbejde videre med.</div>
    </div>

    <!-- Actions row (same placement as subprojects.html) -->
    <div class="actions">
        <div></div>
        <a class="create-link" th:href="@{/projects/create}">Create project</a>
    </div>

    <div th:if="${param.success}" class="alert alert-success">
        <p th:text="${param.success}"></p>
    </div>

    <div th:if="${param.error}" class="alert alert-danger">
        <p th:text="${param.error}"></p>
    </div>

    <div class="projects-list" th:if="${!#lists.isEmpty(projects)}">
        <div th:each="p, stat : ${projects}">
            <div class="project-label">PROJEKT <span th:text="${stat.index + 1}">1</span></div>

            <div class="project-row">
                <a class="project-box project-link" th:href="@{|/projects/${p.id}/subprojects|}">
                    <div class="project-name"
                         th:text="${#strings.isEmpty(p.name) ? 'Administrativ IT-Løsning for KEA' : p.name}">
                        Administrativ IT-Løsning for KEA
                    </div>

                    <div class="project-meta">
                        Deadline:
                        <span th:text="${p.deadline != null ? p.deadline : '24/12/2025'}">24/12/2025</span>
                    </div>

                    <div class="project-meta">
                        Total estimerede timer:
                        <span th:text="${p.totalEstimatedHours != null ? p.totalEstimatedHours : '650'}">650</span>
                    </div>
                </a>

                <div style="display:flex; flex-direction:column; gap:8px; align-items:flex-end;">
                    <a class="circle-button" th:href="@{|/projects/${p.id}/edit|}" title="Edit">✏</a>

                    <form class="delete-form" th:action="@{/projects/{id}/delete(id=${p.id})}" method="post" style="display:block;">
                        <button type="submit" class="delete-button">Slet projekt</button>
                    </form>
                </div>
            </div>

            <!-- Optional CSS to ensure link looks like the box -->
            <style>
                .project-link { text-decoration: none; color: inherit; display: block; }
            </style>
        </div>
    </div>

    <div class="empty-state" th:if="${#lists.isEmpty(projects)}">
        Der er endnu ingen projekter. Opret det første projekt for at se det her.
    </div>

</div>

</body>
</html>
